{"version":3,"file":"static/js/576.15f435ac.chunk.js","mappings":"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","sources":["services/tutorService.ts","services/selectionService.ts","services/hintService.ts","hooks/useAdaptiveTutor.ts","../node_modules/lucide-react/src/icons/circle-check.ts","../node_modules/lucide-react/src/icons/skip-forward.ts","pages/TutorDevPage.tsx"],"sourcesContent":["import { db } from '../firebase.ts';\nimport {\n  doc,\n  setDoc,\n  getDoc,\n  addDoc,\n  updateDoc,\n  collection,\n  serverTimestamp,\n  Timestamp,\n  query,\n  where,\n  orderBy,\n  limit,\n  getDocs,\n} from 'firebase/firestore';\nimport { AttemptDoc, TopicStatsDoc, DifficultyBand } from '../types/tutor';\n\n// Utility: clamp difficulty band shifts\nconst upshift: Record<DifficultyBand, DifficultyBand> = { easy: 'medium', medium: 'hard', hard: 'hard' };\nconst downshift: Record<DifficultyBand, DifficultyBand> = { easy: 'easy', medium: 'easy', hard: 'medium' };\n\n// Compute EMA\nfunction ema(prev: number | undefined, value: number, alpha = 0.3): number {\n  if (prev == null || Number.isNaN(prev)) return value;\n  return alpha * value + (1 - alpha) * prev;\n}\n\nexport async function startAttempt(params: {\n  userId: string;\n  questionId: string;\n  topic: string;\n  difficulty: DifficultyBand;\n  language?: string;\n}): Promise<string> {\n  const attemptsCol = collection(db, 'attempts');\n  const now = new Date();\n  const docRef = await addDoc(attemptsCol, {\n    userId: params.userId,\n    questionId: params.questionId,\n    topic: params.topic,\n    difficulty: params.difficulty,\n    language: params.language || null,\n    startedAt: now,\n    endedAt: null,\n    timeTakenSec: null,\n    wrongAttempts: 0,\n    finalCorrect: false,\n    wasSkipped: false,\n    errorTypes: [],\n    hintTiersUsed: [],\n    created_at: serverTimestamp(),\n    updated_at: serverTimestamp(),\n  });\n  return docRef.id;\n}\n\nexport async function logWrongSubmission(params: {\n  attemptId: string;\n  errorTypes?: string[];\n  code?: string;\n  hintTierUsed?: number;\n}): Promise<void> {\n  const ref = doc(db, 'attempts', params.attemptId);\n  const snap = await getDoc(ref);\n  if (!snap.exists()) throw new Error('Attempt not found');\n  const data = snap.data() as any;\n  const wrongAttempts = (data.wrongAttempts || 0) + 1;\n  const errorTypes = Array.from(new Set([...(data.errorTypes || []), ...(params.errorTypes || [])]));\n  const hintTiersUsed = [...(data.hintTiersUsed || []), ...(params.hintTierUsed ? [params.hintTierUsed] : [])];\n  await updateDoc(ref, {\n    wrongAttempts,\n    errorTypes,\n    code: params.code ?? data.code ?? null,\n    hintTiersUsed,\n    updated_at: serverTimestamp(),\n  });\n}\n\nexport async function completeAttempt(params: {\n  attemptId: string;\n  finalCorrect: boolean;\n  wasSkipped?: boolean;\n}): Promise<AttemptDoc> {\n  const ref = doc(db, 'attempts', params.attemptId);\n  const snap = await getDoc(ref);\n  if (!snap.exists()) throw new Error('Attempt not found');\n  const now = new Date();\n  const d = snap.data() as any;\n\n  const startedAt = (d.startedAt?.toDate?.() || d.startedAt || now) as Date;\n  const timeTakenSec = Math.max(0, Math.round((now.getTime() - new Date(startedAt).getTime()) / 1000));\n\n  await updateDoc(ref, {\n    endedAt: now,\n    timeTakenSec,\n    finalCorrect: params.finalCorrect,\n    wasSkipped: !!params.wasSkipped,\n    updated_at: serverTimestamp(),\n  });\n\n  // Update topic stats for the user\n  await updateTopicStats({\n    userId: d.userId,\n    topic: d.topic,\n    currentDifficulty: d.difficulty as DifficultyBand,\n    finalCorrect: params.finalCorrect,\n    timeTakenSec,\n    wasSkipped: !!params.wasSkipped,\n  });\n\n  const updatedSnap = await getDoc(ref);\n  const out = updatedSnap.data() as any;\n  return normalizeAttempt({ id: params.attemptId, ...out });\n}\n\nfunction normalizeAttempt(data: any): AttemptDoc {\n  return {\n    id: data.id,\n    userId: data.userId,\n    questionId: data.questionId,\n    topic: data.topic,\n    difficulty: data.difficulty,\n    language: data.language ?? undefined,\n    startedAt: data.startedAt?.toDate?.() || data.startedAt,\n    endedAt: data.endedAt?.toDate?.() || data.endedAt || null,\n    timeTakenSec: data.timeTakenSec ?? undefined,\n    wrongAttempts: data.wrongAttempts ?? 0,\n    finalCorrect: !!data.finalCorrect,\n    wasSkipped: !!data.wasSkipped,\n    errorTypes: data.errorTypes || [],\n    code: data.code ?? undefined,\n    hintTiersUsed: data.hintTiersUsed || [],\n  } as AttemptDoc;\n}\n\nexport async function getUserTopicStats(userId: string, topic: string): Promise<TopicStatsDoc | null> {\n  const ref = doc(db, 'users', userId, 'topic_stats', topic);\n  const snap = await getDoc(ref);\n  if (!snap.exists()) return null;\n  const d = snap.data() as any;\n  return {\n    id: topic,\n    userId,\n    topic,\n    accuracyEma: d.accuracyEma ?? 0,\n    avgTimeSecEma: d.avgTimeSecEma ?? 0,\n    attempts: d.attempts ?? 0,\n    correct: d.correct ?? 0,\n    recentFailures: d.recentFailures ?? 0,\n    currentDifficulty: (d.currentDifficulty as DifficultyBand) || 'easy',\n    lastUpdated: d.lastUpdated?.toDate?.() || d.lastUpdated || new Date(),\n  };\n}\n\nexport async function updateTopicStats(params: {\n  userId: string;\n  topic: string;\n  currentDifficulty: DifficultyBand;\n  finalCorrect: boolean;\n  timeTakenSec: number;\n  wasSkipped: boolean;\n}): Promise<TopicStatsDoc> {\n  const ref = doc(db, 'users', params.userId, 'topic_stats', params.topic);\n  const snap = await getDoc(ref);\n  const prev = snap.exists() ? (snap.data() as any) : null;\n\n  const attempts = (prev?.attempts ?? 0) + 1;\n  const correct = (prev?.correct ?? 0) + (params.finalCorrect ? 1 : 0);\n  const accuracy = attempts > 0 ? correct / attempts : 0;\n\n  const newAccuracyEma = ema(prev?.accuracyEma, params.finalCorrect ? 1 : 0, 0.3);\n  const newAvgTimeEma = ema(prev?.avgTimeSecEma, params.timeTakenSec, 0.3);\n  const newRecentFailures = params.finalCorrect ? 0 : Math.min(10, (prev?.recentFailures ?? 0) + 1);\n\n  // Simple band adaptation\n  let newBand: DifficultyBand = prev?.currentDifficulty || params.currentDifficulty || 'easy';\n  if (newRecentFailures >= 3) newBand = downshift[newBand];\n  else if (newAccuracyEma >= 0.8 && newAvgTimeEma <= (prev?.avgTimeSecEma ?? params.timeTakenSec)) newBand = upshift[newBand];\n\n  await setDoc(ref, {\n    userId: params.userId,\n    topic: params.topic,\n    accuracyEma: newAccuracyEma,\n    avgTimeSecEma: newAvgTimeEma,\n    attempts,\n    correct,\n    recentFailures: newRecentFailures,\n    currentDifficulty: newBand,\n    lastUpdated: serverTimestamp(),\n  }, { merge: true });\n\n  return {\n    id: params.topic,\n    userId: params.userId,\n    topic: params.topic,\n    accuracyEma: newAccuracyEma,\n    avgTimeSecEma: newAvgTimeEma,\n    attempts,\n    correct,\n    recentFailures: newRecentFailures,\n    currentDifficulty: newBand,\n    lastUpdated: new Date(),\n  };\n}\n\nexport async function recordRecentQuestion(params: { userId: string; questionId: string }): Promise<void> {\n  const ref = doc(db, 'users', params.userId, 'recent_questions', params.questionId);\n  await setDoc(ref, {\n    lastSeen: serverTimestamp(),\n  }, { merge: true });\n}","import { db } from '../firebase.ts';\nimport { collection, doc, getDoc, getDocs, limit, orderBy, query, Timestamp, where } from 'firebase/firestore';\nimport { DifficultyBand, NextProblemResponse } from '../types/tutor.ts';\nimport { getUserTopicStats, recordRecentQuestion } from './tutorService.ts';\n\nconst neighbors: Record<DifficultyBand, DifficultyBand[]> = {\n  easy: ['easy', 'medium'],\n  medium: ['easy', 'medium', 'hard'],\n  hard: ['medium', 'hard'],\n};\n\nexport async function selectNextProblem(userId: string, topicPreference?: string): Promise<NextProblemResponse | null> {\n  // If a topic is provided, use it; else pick the lowest-performing topic by EMA\n  const topic = await pickTargetTopic(userId, topicPreference);\n  if (!topic) return null;\n\n  const stats = await getUserTopicStats(userId, topic);\n  const targetBand: DifficultyBand = stats?.currentDifficulty || 'easy';\n\n  // Fetch candidates\n  const difficultyBands = neighbors[targetBand];\n  const qs = await getDocs(query(collection(db, 'questions'), where('topic', '==', topic)));\n  const all = qs.docs.map((d) => ({ id: d.id, ...(d.data() as any) })).filter((q) => difficultyBands.includes(q.difficulty));\n  if (all.length === 0) return null;\n\n  // Score by simple heuristics: prefer target band, prefer unseen recently\n  const recencyMap = await getRecentMap(userId);\n  const scored = all.map((q) => {\n    const isTarget = q.difficulty === targetBand ? 1 : 0;\n    const lastSeen = recencyMap[q.id];\n    const recencyPenalty = lastSeen ? timeRecencyPenalty(lastSeen) : 0;\n    const score = 1.0 * isTarget + 0.3 * (q.tags?.length || 0) - 0.5 * recencyPenalty;\n    return { q, score };\n  });\n\n  scored.sort((a, b) => b.score - a.score);\n  const chosen = scored[0].q;\n\n  await recordRecentQuestion({ userId, questionId: chosen.id });\n\n  return {\n    questionId: chosen.id,\n    title: chosen.title,\n    topic: chosen.topic,\n    difficulty: chosen.difficulty,\n  };\n}\n\nasync function pickTargetTopic(userId: string, prefer?: string): Promise<string | null> {\n  if (prefer) return prefer;\n  // Fallback: pick topic with lowest accuracyEma among those present in stats; if none, default to 'arrays'\n  // Read at most a few topic_stats docs\n  const statsSnap = await getDocs(collection(db, 'users', userId, 'topic_stats'));\n  const stats = statsSnap.docs.map((d) => ({ id: d.id, ...(d.data() as any) }));\n  if (stats.length === 0) return 'arrays';\n  stats.sort((a, b) => (a.accuracyEma ?? 0) - (b.accuracyEma ?? 0));\n  return stats[0].topic || stats[0].id || 'arrays';\n}\n\nasync function getRecentMap(userId: string): Promise<Record<string, Date>> {\n  const snap = await getDocs(collection(db, 'users', userId, 'recent_questions'));\n  const out: Record<string, Date> = {};\n  for (const d of snap.docs) {\n    const data = d.data() as any;\n    const lastSeen = data.lastSeen?.toDate?.() || data.lastSeen;\n    if (lastSeen) out[d.id] = lastSeen as Date;\n  }\n  return out;\n}\n\nfunction timeRecencyPenalty(dt: Date): number {\n  const now = Date.now();\n  const t = new Date(dt).getTime();\n  const hours = (now - t) / (1000 * 60 * 60);\n  // Recent within 24h gets penalty near 1, decays with time\n  return Math.max(0, 1 - Math.min(1, hours / 24));\n}","import { db } from '../firebase.ts';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { AdaptiveHintRequest, AdaptiveHintResponse } from '../types/tutor.ts';\n\n// Optional: call a backend function if configured (to avoid exposing LLM keys)\nasync function maybeCallLLMBackend(payload: any): Promise<string | null> {\n  const url = (import.meta as any)?.env?.VITE_HINTS_FUNCTION_URL;\n  if (!url) return null;\n  try {\n    const res = await fetch(url, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload),\n    });\n    if (!res.ok) return null;\n    const data = await res.json();\n    return data.hint || null;\n  } catch {\n    return null;\n  }\n}\n\nfunction encouragement(attempt: number): string {\n  const msgs = [\n    \"You're on the right track!\",\n    'Great effort! Try a smaller example.',\n    'Each attempt builds intuition—keep going.',\n    'Almost there! Check edge cases.',\n  ];\n  return msgs[Math.min(attempt - 1, msgs.length - 1)];\n}\n\nfunction ruleBasedHint(opts: { hints: string[]; attemptNumber: number; errorTypes?: string[]; language?: string }): string {\n  // Targeted micro-hints for common errors\n  const { errorTypes = [], language } = opts;\n  if (errorTypes.includes('index_out_of_bounds')) {\n    if (language?.toLowerCase() === 'java') return 'Remember: arrays are 0-indexed in Java; the last valid index is length-1.';\n    return 'Check your indices: arrays are 0-indexed; avoid accessing negative or length index.';\n  }\n  if (errorTypes.includes('off_by_one')) {\n    return 'Check loop bounds and inclusive/exclusive conditions; try printing for a 2-3 element input.';\n  }\n  // Progressive disclosure from question-provided hints\n  const i = Math.max(0, Math.min(opts.attemptNumber - 1, opts.hints.length - 1));\n  return opts.hints[i] || 'Break the problem into smaller subproblems and verify each with a tiny test.';\n}\n\nexport async function getAdaptiveHint(req: AdaptiveHintRequest): Promise<AdaptiveHintResponse> {\n  const qSnap = await getDoc(doc(db, 'questions', req.questionId));\n  if (!qSnap.exists()) throw new Error('Question not found');\n  const q = qSnap.data() as any;\n  const tier = Math.min(Math.max(req.attemptNumber, 1), 4);\n\n  // Try backend LLM if available for tier >= 2\n  if (tier >= 2) {\n    const llmHint = await maybeCallLLMBackend({\n      question: { title: q.title, statement: q.description, hints: q.hints },\n      userContext: { language: req.language, errorTypes: req.errorTypes },\n      tier,\n    });\n    if (llmHint) {\n      return { hint: llmHint, tier, isLastHint: tier >= 4, encouragement: encouragement(req.attemptNumber) };\n    }\n  }\n\n  const hint = ruleBasedHint({ hints: q.hints || [], attemptNumber: req.attemptNumber, errorTypes: req.errorTypes, language: req.language });\n  return { hint, tier, isLastHint: tier >= (q.hints?.length || 3), encouragement: encouragement(req.attemptNumber) };\n}","import { useCallback, useRef, useState } from 'react';\nimport { startAttempt, logWrongSubmission, completeAttempt } from '../services/tutorService.ts';\nimport { selectNextProblem } from '../services/selectionService.ts';\nimport { getAdaptiveHint } from '../services/hintService.ts';\nimport type { AdaptiveHintResponse, DifficultyBand } from '../types/tutor.ts';\n\nexport function useAdaptiveTutor(userId: string) {\n  const [currentAttemptId, setAttemptId] = useState<string | null>(null);\n  const attemptCountRef = useRef<number>(0);\n\n  const beginAttempt = useCallback(async (q: { id: string; topic: string; difficulty: DifficultyBand; language?: string }) => {\n    const id = await startAttempt({ userId, questionId: q.id, topic: q.topic, difficulty: q.difficulty, language: q.language });\n    setAttemptId(id);\n    attemptCountRef.current = 0;\n    return id;\n  }, [userId]);\n\n  const wrongSubmission = useCallback(async (opts: { errorTypes?: string[]; code?: string; hintTierUsed?: number }) => {\n    if (!currentAttemptId) return;\n    attemptCountRef.current += 1;\n    await logWrongSubmission({ attemptId: currentAttemptId, ...opts });\n  }, [currentAttemptId]);\n\n  const finishAttempt = useCallback(async (opts: { finalCorrect: boolean; wasSkipped?: boolean }) => {\n    if (!currentAttemptId) return null;\n    const done = await completeAttempt({ attemptId: currentAttemptId, finalCorrect: opts.finalCorrect, wasSkipped: opts.wasSkipped });\n    setAttemptId(null);\n    attemptCountRef.current = 0;\n    return done;\n  }, [currentAttemptId]);\n\n  const requestHint = useCallback(async (q: { id: string; language?: string }, errorTypes?: string[]): Promise<AdaptiveHintResponse> => {\n    const attemptNum = Math.max(1, attemptCountRef.current + 1);\n    return getAdaptiveHint({ questionId: q.id, userId, attemptId: currentAttemptId || 'na', attemptNumber: attemptNum, errorTypes, language: q.language });\n  }, [userId, currentAttemptId]);\n\n  const nextProblem = useCallback(async (topicPreference?: string) => {\n    return selectNextProblem(userId, topicPreference);\n  }, [userId]);\n\n  return {\n    beginAttempt,\n    wrongSubmission,\n    finishAttempt,\n    requestHint,\n    nextProblem,\n    currentAttemptId,\n  } as const;\n}","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm9 12 2 2 4-4', key: 'dzmm74' }],\n];\n\n/**\n * @component @name CircleCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtOSAxMiAyIDIgNC00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheck = createLucideIcon('circle-check', __iconNode);\n\nexport default CircleCheck;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 4v16', key: '7j8fe9' }],\n  [\n    'path',\n    {\n      d: 'M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z',\n      key: 'zs4d6',\n    },\n  ],\n];\n\n/**\n * @component @name SkipForward\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgNHYxNiIgLz4KICA8cGF0aCBkPSJNNi4wMjkgNC4yODVBMiAyIDAgMCAwIDMgNnYxMmEyIDIgMCAwIDAgMy4wMjkgMS43MTVsOS45OTctNS45OThhMiAyIDAgMCAwIC4wMDMtMy40MzJ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/skip-forward\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SkipForward = createLucideIcon('skip-forward', __iconNode);\n\nexport default SkipForward;\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAdaptiveTutor } from '../hooks/useAdaptiveTutor.ts';\nimport { useAuth } from '../context/AuthContext.tsx';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebase.ts';\nimport Editor from '@monaco-editor/react';\nimport { Lightbulb, Play, SkipForward, CheckCircle2, AlertTriangle } from 'lucide-react';\nimport type { AdaptiveHintResponse } from '../types/tutor.ts';\n\ninterface QuestionDoc {\n  id: string;\n  title: string;\n  description: string;\n  topic: string;\n  difficulty: 'easy' | 'medium' | 'hard';\n  hints?: string[];\n  tags?: string[];\n  testCases?: { input: any; expectedOutput: any; explanation?: string }[];\n  starterCode?: string;\n}\n\nconst defaultStarter = `function solve(input) {\\n  // TODO: implement\\n  return null;\\n}`;\n\nexport default function TutorDevPage() {\n  const { user } = useAuth();\n  const userId = user?.uid;\n  const { beginAttempt, wrongSubmission, finishAttempt, requestHint, nextProblem, currentAttemptId } = useAdaptiveTutor(userId || 'anon');\n\n  const [loading, setLoading] = useState(false);\n  const [question, setQuestion] = useState<QuestionDoc | null>(null);\n  const [code, setCode] = useState<string>(defaultStarter);\n  const [results, setResults] = useState<{ name: string; passed: boolean; expected: any; received: any; error?: string }[]>([]);\n  const [hint, setHint] = useState<AdaptiveHintResponse | null>(null);\n  const [errorTypes, setErrorTypes] = useState<string[]>([]);\n\n  const loadNext = useCallback(async () => {\n    if (!userId) return;\n    setLoading(true);\n    setResults([]);\n    setHint(null);\n    setErrorTypes([]);\n    try {\n      const np = await nextProblem();\n      if (!np) {\n        setQuestion(null);\n        return;\n      }\n      const docSnap = await getDoc(doc(db, 'questions', np.questionId));\n      const data = docSnap.data() as any;\n      const q: QuestionDoc = { id: np.questionId, ...data };\n      setQuestion(q);\n      setCode(q.starterCode || defaultStarter);\n      await beginAttempt({ id: np.questionId, topic: q.topic, difficulty: q.difficulty, language: 'javascript' });\n    } finally {\n      setLoading(false);\n    }\n  }, [userId, nextProblem, beginAttempt]);\n\n  useEffect(() => {\n    // initial load\n    loadNext();\n  }, [userId, loadNext]);\n\n  const runCode = useCallback(() => {\n    if (!question) return;\n    const tests = question.testCases || [];\n    const wrapped = `\"use strict\";\\n${code}\\nreturn (typeof solve !== 'undefined') ? solve : undefined;`;\n    let fn: any;\n    try {\n      // eslint-disable-next-line no-new-func\n      fn = new Function(wrapped)();\n      if (typeof fn !== 'function') throw new Error('Define function solve(input) in your code.');\n    } catch (e: any) {\n      setResults([{ name: 'Compile', passed: false, expected: 'No error', received: 'Error', error: e?.message || String(e) }]);\n      setErrorTypes(inferErrorTypes(e?.message || ''));\n      return;\n    }\n\n    const out: typeof results = [];\n    let inferred: string[] = [];\n    for (let i = 0; i < tests.length; i++) {\n      const t = tests[i];\n      try {\n        const received = fn(t.input);\n        const passed = JSON.stringify(received) === JSON.stringify(t.expectedOutput);\n        out.push({ name: `Test ${i + 1}`, passed, expected: t.expectedOutput, received });\n        if (!passed) inferred = inferred.concat(inferErrorTypes('mismatch'));\n      } catch (e: any) {\n        out.push({ name: `Test ${i + 1}`, passed: false, expected: t.expectedOutput, received: undefined, error: e?.message || String(e) });\n        inferred = inferred.concat(inferErrorTypes(e?.message || ''));\n      }\n    }\n    setResults(out);\n    setErrorTypes(Array.from(new Set(inferred)));\n  }, [question, code]);\n\n  const getHint = useCallback(async () => {\n    if (!question) return;\n    const h = await requestHint({ id: question.id, language: 'javascript' }, errorTypes);\n    setHint(h);\n    // track that a hint tier was used in wrongSubmission (optional)\n    await wrongSubmission({ errorTypes, hintTierUsed: h.tier });\n  }, [question, errorTypes, requestHint, wrongSubmission]);\n\n  const markCorrect = useCallback(async () => {\n    await finishAttempt({ finalCorrect: true });\n    await loadNext();\n  }, [finishAttempt, loadNext]);\n\n  const markWrong = useCallback(async () => {\n    await wrongSubmission({ errorTypes });\n  }, [wrongSubmission, errorTypes]);\n\n  const skip = useCallback(async () => {\n    await finishAttempt({ finalCorrect: false, wasSkipped: true });\n    await loadNext();\n  }, [finishAttempt, loadNext]);\n\n  if (!userId) {\n    return (\n      <div className=\"p-6 text-red-300\">Sign in required to demo Tutor.</div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white px-6 py-6\">\n      <div className=\"max-w-5xl mx-auto space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <h1 className=\"text-2xl font-bold\">Tutor Dev</h1>\n          <button onClick={loadNext} disabled={loading} className=\"px-3 py-1.5 rounded bg-gray-700 hover:bg-gray-600 text-sm\">{loading ? 'Loading...' : 'Next Problem'}</button>\n        </div>\n\n        {question ? (\n          <div className=\"space-y-4\">\n            <div className=\"bg-gray-800/60 rounded-xl border border-gray-700/60 p-4\">\n              <div className=\"text-sm text-gray-400 mb-1\">{question.topic} • {question.difficulty}</div>\n              <div className=\"text-xl font-semibold\">{question.title}</div>\n              <p className=\"text-gray-300 mt-2\">{question.description}</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <div className=\"bg-gray-800/60 rounded-xl border border-gray-700/60\">\n                <div className=\"flex items-center justify-between p-3 border-b border-gray-700/60\">\n                  <span className=\"text-sm text-gray-300\">Editor (define solve(input))</span>\n                  <div className=\"flex gap-2\">\n                    <button onClick={runCode} className=\"px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-sm flex items-center gap-1\"><Play className=\"w-4 h-4\"/>Run</button>\n                    <button onClick={markWrong} className=\"px-3 py-1.5 rounded bg-amber-600 hover:bg-amber-700 text-sm flex items-center gap-1\"><AlertTriangle className=\"w-4 h-4\"/>Wrong</button>\n                    <button onClick={markCorrect} className=\"px-3 py-1.5 rounded bg-blue-600 hover:bg-blue-700 text-sm flex items-center gap-1\"><CheckCircle2 className=\"w-4 h-4\"/>Mark Correct</button>\n                    <button onClick={skip} className=\"px-3 py-1.5 rounded bg-gray-600 hover:bg-gray-500 text-sm flex items-center gap-1\"><SkipForward className=\"w-4 h-4\"/>Skip</button>\n                  </div>\n                </div>\n                <div className=\"h-[400px]\">\n                  <Editor height=\"100%\" defaultLanguage=\"javascript\" theme=\"vs-dark\" value={code} onChange={(v)=>setCode(v||'')} options={{ fontSize: 14, minimap: { enabled: false } }} />\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-800/60 rounded-xl border border-gray-700/60 p-4\">\n                  <div className=\"flex items-center gap-2 mb-2\"><Lightbulb className=\"w-5 h-5 text-yellow-400\"/><span className=\"font-medium\">Hint</span></div>\n                  {hint ? (\n                    <div className=\"text-sm text-gray-200\">\n                      <div className=\"mb-1 text-gray-400\">Tier {hint.tier}{hint.isLastHint ? ' • last' : ''}</div>\n                      <div className=\"mb-2\">{hint.hint}</div>\n                      {hint.encouragement && <div className=\"text-gray-400\">{hint.encouragement}</div>}\n                    </div>\n                  ) : (\n                    <button onClick={getHint} className=\"px-3 py-1.5 rounded bg-yellow-600 hover:bg-yellow-700 text-sm\">Get Hint</button>\n                  )}\n                </div>\n\n                <div className=\"bg-gray-800/60 rounded-xl border border-gray-700/60 p-4\">\n                  <div className=\"font-medium mb-2\">Results</div>\n                  <div className=\"space-y-2 text-sm\">\n                    {results.length === 0 && <div className=\"text-gray-400\">No runs yet.</div>}\n                    {results.map((r, i) => (\n                      <div key={i} className={`p-2 rounded ${r.passed ? 'bg-emerald-900/30 border border-emerald-700/40' : 'bg-red-900/30 border border-red-700/40'}`}>\n                        <div className=\"flex justify-between\"><span>{r.name}</span><span>{r.passed ? '✅' : '❌'}</span></div>\n                        {!r.passed && (\n                          <div className=\"mt-1 text-gray-300\">\n                            {r.error ? <div>Error: {r.error}</div> : <div>Expected: {JSON.stringify(r.expected)} • Received: {JSON.stringify(r.received)}</div>}\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                  {errorTypes.length > 0 && (\n                    <div className=\"text-xs text-gray-400 mt-3\">Detected errors: {errorTypes.join(', ')}</div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"text-gray-400\">No suitable question found. Seed questions and try again.</div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction inferErrorTypes(message: string): string[] {\n  const out: string[] = [];\n  const msg = (message || '').toLowerCase();\n  if (msg.includes('out of bounds') || msg.includes('length') && msg.includes('index')) out.push('index_out_of_bounds');\n  if (msg.includes('undefined') || msg.includes('null')) out.push('null_ref');\n  if (msg.includes('rangeerror')) out.push('infinite_loop');\n  if (msg.includes('mismatch')) out.push('wrong_answer');\n  // Heuristic OBOE\n  if (msg.includes('off by one') || msg.includes('boundary')) out.push('off_by_one');\n  return Array.from(new Set(out));\n}"],"names":["upshift","easy","medium","hard","downshift","ema","prev","value","alpha","arguments","length","undefined","Number","isNaN","async","completeAttempt","params","_d$startedAt","_d$startedAt$toDate","ref","doc","db","attemptId","snap","getDoc","exists","Error","now","Date","d","data","startedAt","toDate","call","timeTakenSec","Math","max","round","getTime","updateDoc","endedAt","finalCorrect","wasSkipped","updated_at","serverTimestamp","_prev$attempts","_prev$correct","_prev$recentFailures","_prev$avgTimeSecEma","userId","topic","attempts","correct","newAccuracyEma","accuracyEma","newAvgTimeEma","avgTimeSecEma","newRecentFailures","min","recentFailures","newBand","currentDifficulty","setDoc","lastUpdated","merge","id","updateTopicStats","difficulty","out","_data$language","_data$startedAt","_data$startedAt$toDat","_data$endedAt","_data$endedAt$toDate","_data$timeTakenSec","_data$wrongAttempts","_data$code","questionId","language","wrongAttempts","errorTypes","code","hintTiersUsed","normalizeAttempt","_objectSpread","neighbors","selectNextProblem","topicPreference","prefer","statsSnap","getDocs","collection","stats","docs","map","sort","a","b","_a$accuracyEma","_b$accuracyEma","pickTargetTopic","_d$accuracyEma","_d$avgTimeSecEma","_d$attempts","_d$correct","_d$recentFailures","_d$lastUpdated","_d$lastUpdated$toDate","getUserTopicStats","targetBand","difficultyBands","all","query","where","filter","q","includes","recencyMap","_data$lastSeen","_data$lastSeen$toDate","lastSeen","getRecentMap","scored","_q$tags","isTarget","recencyPenalty","dt","t","hours","timeRecencyPenalty","score","tags","chosen","recordRecentQuestion","title","encouragement","attempt","msgs","getAdaptiveHint","req","_q$hints","qSnap","tier","attemptNumber","llmHint","payload","_import$meta","_import$meta$env","url","import","env","VITE_HINTS_FUNCTION_URL","res","fetch","method","headers","body","JSON","stringify","ok","json","hint","_unused","maybeCallLLMBackend","question","statement","description","hints","userContext","isLastHint","opts","toLowerCase","i","ruleBasedHint","useAdaptiveTutor","currentAttemptId","setAttemptId","useState","attemptCountRef","useRef","beginAttempt","useCallback","attemptsCol","addDoc","created_at","startAttempt","current","wrongSubmission","_ref","_params$code","Array","from","Set","hintTierUsed","logWrongSubmission","finishAttempt","done","requestHint","attemptNum","nextProblem","CircleCheck","createLucideIcon","cx","cy","r","key","SkipForward","defaultStarter","TutorDevPage","user","useAuth","uid","loading","setLoading","setQuestion","setCode","results","setResults","setHint","setErrorTypes","loadNext","np","starterCode","useEffect","runCode","tests","testCases","wrapped","concat","fn","Function","e","name","passed","expected","received","error","message","String","inferErrorTypes","inferred","input","expectedOutput","push","getHint","h","markCorrect","markWrong","skip","_jsx","className","children","_jsxs","onClick","disabled","Play","AlertTriangle","CheckCircle2","Editor","height","defaultLanguage","theme","onChange","v","options","fontSize","minimap","enabled","Lightbulb","join","msg"],"sourceRoot":""}